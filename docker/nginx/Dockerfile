# ----------------------------------------------------------------------------------------------------------------------
# Колекционирование статики
# ----------------------------------------------------------------------------------------------------------------------
FROM algol2302/defop-backend AS collection-static
RUN python ./manage.py collectstatic --noinput


# ----------------------------------------------------------------------------------------------------------------------
# Подготовка nginx-image к бою
# ----------------------------------------------------------------------------------------------------------------------
FROM nginx:1.15-alpine
COPY ./docker/nginx/conf/nginx.conf /etc/nginx/conf.d/default.conf
COPY --from=collection-static /opt/static_files /var/www/static
EXPOSE 80
